<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register</title>
    <!-- <link rel="stylesheet" href="css/style.css">  -->
</head>
<body>
<div class="container">
    <h2>User Registration</h2>

    <form id="registerForm">
        <label>Full Name</label>
        <input type="text" id="name" placeholder="Enter your namee" required>

        <label>Email</label>
        <input type="email" id="email" placeholder="Enter your email" required>

        <label>Password</label>
        <input type="password" id="password" placeholder="Enter password" required>

        <label>Confirm Password</label>
        <input type="password" id="confirmPassword" placeholder="Confirm password" required>

        <button type="submit">Register</button>
    </form>

    <p id="message"></p>
</div>

<script>
document.getElementById('registerForm').addEventListener('submit', function(e){
    e.preventDefault();

    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    const message = document.getElementById('message');

    if(password !== confirmPassword){
        message.style.color = "red";
        message.innerText = "Passwords do not match!";
        return;
    }

    const user = { name, email, password };

    // âœ… FIXED PATH
    fetch('/api/register', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(user)
    })
    .then(res => {
        if(!res.ok) throw new Error("Failed to register user");
        return res.json();
    })
    .then(data => {
        message.style.color = "green";
        message.innerText = "User registered successfully!";
        console.log("Registered user:", data);
    })
    .catch(err => {
        message.style.color = "red";
        message.innerText = err.message;
        console.error(err);
    });
});
</script>

<!-- <script>
document.getElementById('registerForm').addEventListener('submit', function(e){
    e.preventDefault(); // stop default form submit

    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    const message = document.getElementById('message');

    if(password !== confirmPassword){
        message.style.color = "red";
        message.innerText = "Passwords do not match!";
        return;
    }

    // Backend payload
    const user = { name, email, password };

    fetch('/api/register', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(user)
    })
    .then(res => {
        if(!res.ok) throw new Error("Failed to register user");
        return res.json();
    })
    .then(data => {
        message.style.color = "green";
        message.innerText = "User registered successfully!";
        console.log("Registered user:", data);
    })
    .catch(err => {
        message.style.color = "red";
        message.innerText = err.message;
        console.error(err);
    });
});
</script> -->
</body>
</html>